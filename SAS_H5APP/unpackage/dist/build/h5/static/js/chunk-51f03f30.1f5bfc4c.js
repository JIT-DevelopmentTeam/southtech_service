(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-51f03f30"],{"43aa":function(e,t,i){"use strict";var n=i("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("96cf");var a=n(i("3b8d"));i("c5f6");i("19e2");var s=i("72c3"),o={props:{attachmentList:{type:Array},mode:{type:String},showProcess:{type:Boolean,default:!0},header:{type:Object},limit:{type:Number,default:9},fileKeyName:{type:String,default:"file"},canUploadFile:{type:Boolean,default:!1},stageStatus:{type:String}},computed:{list:function(){return this.attachmentList}},data:function(){return{fileList:[],uploadFileUrl:this.$IP+"/f/mobile/upload/uploadFile"}},methods:{previewImg:function(e){uni.previewImage({current:0,urls:[e]})},downLoad:function(e){uni.showModal({title:"确定要下载此附件吗",content:" ",success:function(t){t.confirm&&(uni.showLoading({title:"下载中,请稍后"}),console.log(e),uni.downloadFile({url:e,success:function(e){e.tempFilePath;uni.saveFile({tempFilePath:e.tempFilePath,success:function(e){var t=e.savedFilePath;uni.hideLoading(),uni.showToast({title:"保存成功，路径为"+t}),uni.openDocument({filePath:t,success:function(e){console.log(e)}})}})},fail:function(e){console.log(e),uni.hideLoading(),uni.showToast({title:"下载失败",icon:"none"})}}),setTimeout((function(){uni.hideLoading()}),2e4))}})},deleteItem:function(e,t){var i=this;uni.showModal({title:"提示",content:"确定要删除此项吗？",success:function(n){n.confirm&&(100!=i.list[e].process&&"undefined"!=typeof i.list[e].uploadTask&&i.list[e].uploadTask.abort(),i.list.splice(e,1),i.$forceUpdate(),i.$emit("deleteSuccess",i.list,t),i.$emit("update:attachmentList",i.list))}})},chooseFile:function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(){var t,i,n,a,o,r,u,l,c,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null==this.limit||isNaN(this.limit)){e.next=4;break}if(!(this.list.length>=this.limit)){e.next=4;break}return uni.showToast({title:"已达到最大上传数量",icon:"none"}),e.abrupt("return");case 4:if(t=this.canUploadFile,t=!1,t){e.next=18;break}return e.next=9,uni.chooseImage({count:null==this.limit||this.limit-this.list.length>9?9:9-this.limit,sizeType:["original","compressed"],sourceType:["album"]});case 9:if(i=e.sent,"undefined"!=typeof i[1]){e.next=12;break}return e.abrupt("return");case 12:for(n=i[1].tempFiles,a=[],o=0;o<n.length;o++)r={id:(0,s.guid)(),path:n[o].path,name:n[o].name,size:n[o].size},a.push(r);console.log(a),e.next=18;break;case 18:for(u in this.$emit("uploadSuccess",a),a)l=a[u].id,c=a[u].path,d=a[u].name,this.list.push({id:l,fileName:d,url:c,type:this.isImg(c)?"image":"file"}),this.$forceUpdate();case 20:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),isImg:function(e){var t=e.lastIndexOf("."),i=e.substr(t+1),n=-1!==["docx","doc","doc","pdf","txt","ppt","pptx","zip","rar"].indexOf(i.toLowerCase());return n}},mounted:function(){}};t.default=o},"511d":function(e,t,i){var n=i("5ea2");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("4f06").default;a("70569fea",n,!0,{sourceMap:!1,shadowMode:!1})},"5ea2":function(e,t,i){var n=i("24fb");t=n(!1),t.push([e.i,".imgs[data-v-127ae0dd]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap;width:calc(100% + %?15?%)}.imgs .file[data-v-127ae0dd]{min-width:calc(100% - %?15?%);border:1px solid #ccc;box-sizing:border-box;margin-top:%?20?%;position:relative}.imgs .file .noImg[data-v-127ae0dd]{padding:%?20?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;text-align:left;width:100%;font-size:%?26?%;color:#999;word-break:break-all;box-sizing:border-box}.imgs uni-progress[data-v-127ae0dd]{margin-top:%?-6?%;border-radius:%?20?%}.imgs .del[data-v-127ae0dd]{position:absolute;width:%?35?%;height:%?35?%;background:#f56c6c;color:#fff;top:0;text-align:center;right:0;line-height:%?35?%;font-size:%?30?%;z-index:100}.imgs .btn[data-v-127ae0dd]{width:100%;margin:%?20?% 0;color:#007aff;background-color:#fff;border:#007aff %?2?% solid}",""]),e.exports=t},"72c3":function(e,t,i){"use strict";function n(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return e()+e()+e()+e()+e()+e()+e()+e()}Object.defineProperty(t,"__esModule",{value:!0}),t.guid=n,i("6b54")},"7d1f":function(e,t,i){"use strict";i.r(t);var n=i("8067"),a=i("ad44");for(var s in a)"default"!==s&&function(e){i.d(t,e,(function(){return a[e]}))}(s);i("cd8f");var o,r=i("f0c5"),u=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,"127ae0dd",null,!1,n["a"],o);t["default"]=u.exports},8067:function(e,t,i){"use strict";var n,a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[i("v-uni-view",{staticClass:"imgs"},[e._l(e.list,(function(t,n){return"file"==t.type?i("v-uni-view",{key:n,staticClass:"file"},[i("v-uni-view",{staticClass:"noImg",on:{click:function(t){arguments[0]=t=e.$handleEvent(t)},longpress:function(i){arguments[0]=i=e.$handleEvent(i),e.deleteItem(n,t.id)}}},[e._v(e._s(t.fileName))]),"create"==e.mode&&e.showProcess?i("v-uni-progress",{attrs:{percent:t.process,activeColor:"#67C23A",backgroundColor:100==t.process||void 0==t.process?"#67C23A":"#F56C6C","stroke-width":"3"}}):e._e(),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:1!=e.stageStatus,expression:"stageStatus != 1"}]},[i("v-uni-view",{staticClass:"del",on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.deleteItem(n,t.id)}}},[e._v("×")])],1)],1):e._e()})),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:1!=e.stageStatus,expression:"stageStatus != 1"}],staticStyle:{width:"100%"}},[i("v-uni-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.chooseFile.apply(void 0,arguments)}}},[e._v("上传文件")])],1)],2)],1)},s=[];i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return s})),i.d(t,"a",(function(){return n}))},ad44:function(e,t,i){"use strict";i.r(t);var n=i("43aa"),a=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);t["default"]=a.a},cd8f:function(e,t,i){"use strict";var n=i("511d"),a=i.n(n);a.a}}]);